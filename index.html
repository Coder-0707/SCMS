<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Sistem Pengelolaan Inventori untuk menentukan pemesanan optimal menggunakan metode Wagner-Within dan Silver-Meal.">
    <meta name="keywords" content="inventori, pemesanan optimal, Wagner-Within, Silver-Meal, sistem pengelolaan inventori, biaya persediaan">
    <meta name="author" content="Sistem Pengelolaan Inventori">
    <meta favicon="/Logo.svg" type="image/svg+xml">
    <link rel="icon" href="/Logo.svg" type="image/svg+xml">
    <link rel="shortcut icon" href="/Logo.svg" type="image/svg+xml">
    <link rel="apple-touch-icon" href="/Logo.svg " type="image/svg+xml">
    <link rel="apple-touch-icon-precomposed" href="/Logo.svg" type="image/svg+xml">
    <title>Sistem Pengelolaan Inventori</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        .hidden {
            display: none;
        }
        .active-tab {
            background-color: #3b82f6;
            color: white;
        }
        .result-card {
            transition: all 0.3s ease;
        }
        .result-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <div class="container mx-auto px-4 py-8">
        <header class="text-center mb-12">
        <nav class="mb-6">
        <ul class="flex justify-center space-x-4">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
            <div class="result-card bg-blue-50 p-4 rounded-lg border border-blue-100">
            <li>
            <a href="index.html"
               class="text-blue-600  transition-transform duration-200 ease-in-out"
               onclick="animateClick(this)">
               Kalkulasi
            </a>
            </li>
            </div>
            <div class="result-card bg-green-50 p-4 rounded-lg border border-green-100">
            <li>
                <a href="https://www.appsheet.com/start/bd7d0c68-d130-4d85-b112-597b928f16e5"
               class="text-blue-600 transition-transform duration-200 ease-in-out"
               onclick="animateClick(this)">
               Aplikasi Appsheet
                </a>
             </li>
            </div>
             <div class="result-card bg-blue-50 p-4 rounded-lg border border-blue-100">
            <li>
            <a href="calc.html"
               class="text-blue-600  transition-transform duration-200 ease-in-out"
               onclick="animateClick(this)">
               Konversi produk
            </a>
            </li>
            </div>
        </div>
        </ul>
        </nav>
            <h1 class="text-3xl md:text-4xl font-bold text-blue-600 mb-4">Sistem Pengelolaan Inventori</h1>
            <p class="text-lg text-gray-600 max-w-3xl mx-auto">
                Sistem ini membantu menentukan pemesanan optimal menggunakan metode Wagner-Within dan Silver-Meal untuk meminimalkan biaya persediaan.
            </p>
        </header>

        <div class="flex flex-col lg:flex-row gap-8">
            <!-- Input Section -->
            <div class="w-full lg:w-1/3 bg-white rounded-xl shadow-md p-6">
                <h2 class="text-xl font-semibold mb-4 text-gray-800">Parameter Inventori</h2>
                
                <form id="inventoryForm">
                    <div class="mb-4">
                        <label class="block text-gray-700 mb-2">Jumlah Periode:</label>
                        <input type="number" id="periods" min="2" max="12" value="12" 
                               class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </div>

                    <div class="mb-4">
                        <label class="block text-gray-700 mb-2">Biaya Pemesanan (A):</label>
                        <input type="number" id="setupCost" min="1" value="700000" 
                               class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </div>

                    <div class="mb-4">
                        <label class="block text-gray-700 mb-2">Biaya Simpan per Unit (H):</label>
                        <input type="number" id="holdingCost" min="1" value="11000" 
                               class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </div>

                    <div id="demandsContainer" class="mb-6">
                        <label class="block text-gray-700 mb-2">Permintaan per Periode:</label>
                        <div id="demandInputs" class="space-y-2">
                            <!-- Dynamic inputs will be added here -->
                        </div>
                    </div>

                    <button type="button" id="calculateBtn" class="w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 transition duration-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2">
                        Hitung Optimalisasi Inventori
                    </button>
                </form>

                <div class="mt-6">
                    <img src="https://businessprocessxperts.com/wp-content/uploads/2023/11/01-SOP-inventory-management-01-1024x640-1.png" alt="Pengelolaan Inventori" class="rounded-lg w-full" />
                </div>
            </div>

            <!-- Results Section -->
            <div class="w-full lg:w-2/3">
                <!-- Method Tabs -->
                <div class="flex border-b mb-6">
                    <button id="wagnerTab" class="px-4 py-2 font-medium text-gray-700 rounded-t-lg active-tab mr-2">
                        Wagner-Within
                    </button>
                    <button id="silverTab" class="px-4 py-2 font-medium text-gray-700 rounded-t-lg hover:bg-gray-100 mr-2">
                        Silver-Meal
                    </button>
                    <button id="compareTab" class="px-4 py-2 font-medium text-gray-700 rounded-t-lg hover:bg-gray-100">
                        Perbandingan
                    </button>
                </div>

                <!-- Wagner-Within Results -->
                <div id="wagnerResults" class="bg-white rounded-xl shadow-md p-6">
                    <h2 class="text-xl font-semibold mb-4 text-gray-800">Hasil Wagner-Within</h2>
                    <div class="mb-4">
                        <p class="text-gray-600">Metode Wagner-Within menggunakan pendekatan program dinamis untuk menemukan solusi pemesanan optimal yang meminimalkan total biaya persediaan.</p>
                    </div>
                    
                    <div class="overflow-x-auto">
                        <table id="wagnerTable" class="w-full border-collapse">
                            <!-- Table content will be generated dynamically -->
                        </table>
                    </div>

                    <div class="mt-6">
                        <canvas id="wagnerChart"></canvas>
                    </div>

                    <div class="mt-6 bg-blue-50 p-4 rounded-lg">
                        <h3 class="font-semibold text-blue-800 mb-2">Ringkasan Wagner-Within</h3>
                        <p id="wagnerSummary" class="text-gray-700">Isi akan muncul setelah perhitungan.</p>
                    </div>
                </div>

                <!-- Silver-Meal Results -->
                <div id="silverResults" class="hidden bg-white rounded-xl shadow-md p-6">
                    <h2 class="text-xl font-semibold mb-4 text-gray-800">Hasil Silver-Meal</h2>
                    <div class="mb-4">
                        <p class="text-gray-600">Metode Silver-Meal mencoba meminimalkan biaya rata-rata per periode dengan memperpanjang waktu pemesanan sampai biaya rata-rata mulai naik.</p>
                    </div>
                    
                    <div class="overflow-x-auto">
                        <table id="silverTable" class="w-full border-collapse">
                            <!-- Table content will be generated dynamically -->
                        </table>
                    </div>

                    <div class="mt-6">
                        <canvas id="silverChart"></canvas>
                    </div>

                    <div class="mt-6 bg-green-50 p-4 rounded-lg">
                        <h3 class="font-semibold text-green-800 mb-2">Ringkasan Silver-Meal</h3>
                        <p id="silverSummary" class="text-gray-700">Isi akan muncul setelah perhitungan.</p>
                    </div>
                </div>

                <!-- Comparison Results -->
                <div id="compareResults" class="hidden bg-white rounded-xl shadow-md p-6">
                    <h2 class="text-xl font-semibold mb-4 text-gray-800">Perbandingan Kedua Metode</h2>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                        <div class="result-card bg-blue-50 p-4 rounded-lg border border-blue-100">
                            <h3 class="font-semibold text-blue-800 mb-2">Wagner-Within</h3>
                            <p id="wagnerCompare" class="text-gray-700">Data tidak tersedia.</p>
                        </div>
                        <div class="result-card bg-green-50 p-4 rounded-lg border border-green-100">
                            <h3 class="font-semibold text-green-800 mb-2">Silver-Meal</h3>
                            <p id="silverCompare" class="text-gray-700">Data tidak tersedia.</p>
                        </div>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                        <div class="result-card bg-white p-4 rounded-lg border border-gray-200">
                            <h3 class="font-semibold text-gray-800 mb-2">Biaya Total</h3>
                            <canvas id="costChart"></canvas>
                        </div>
                        <div class="result-card bg-white p-4 rounded-lg border border-gray-200">
                            <h3 class="font-semibold text-gray-800 mb-2">Frekuensi Pemesanan</h3>
                            <canvas id="orderChart"></canvas>
                        </div>
                    </div>

                    <div class="bg-yellow-50 p-4 rounded-lg">
                        <h3 class="font-semibold text-yellow-800 mb-2">Kesimpulan</h3>
                        <p id="conclusion" class="text-gray-700">Lakukan perhitungan untuk melihat rekomendasi metode yang paling efisien.</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Method Explanation -->
        <div class="mt-12 bg-white rounded-xl shadow-md p-6">
            <h2 class="text-xl font-semibold mb-4 text-gray-800">Penjelasan Metode</h2>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div>
                    <h3 class="text-lg font-medium text-blue-700 mb-3">Wagner-Within</h3>
                    <p class="text-gray-600 mb-3">
                        Metode Wagner-Within adalah algoritma program dinamis yang memastikan solusi optimal untuk masalah lot-sizing dinamis. 
                        Metode ini mempertimbangkan semua kemungkinan kombinasi periode pemesanan untuk menemukan yang memiliki biaya total paling rendah.
                    </p>
                    <p class="text-gray-600 mb-3">
                        Kelebihan:
                    </p>
                    <ul class="list-disc pl-5 text-gray-600 mb-3">
                        <li>Memberikan solusi yang benar-benar optimal</li>
                        <li>Mempertimbangkan semua kemungkinan kombinasi</li>
                        <li>Cocok untuk permintaan yang sangat bervariasi</li>
                    </ul>
                    <p class="text-gray-600">
                        Kekurangan:
                    </p>
                    <ul class="list-disc pl-5 text-gray-600">
                        <li>Komputasi lebih intensif karena kompleksitas waktu O(nÂ²)</li>
                        <li>Lebih sulit diimplementasikan dibanding metode heuristik</li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-lg font-medium text-green-700 mb-3">Silver-Meal</h3>
                    <p class="text-gray-600 mb-3">
                        Metode Silver-Meal merupakan pendekatan heuristik yang meminimalkan biaya rata-rata per unit waktu. 
                        Algoritma ini memperpanjang waktu pemesanan sampai biaya rata-rata per periode mulai meningkat.
                    </p>
                    <p class="text-gray-600 mb-3">
                        Kelebihan:
                    </p>
                    <ul class="list-disc pl-5 text-gray-600 mb-3">
                        <li>Komputasi lebih sederhana dengan kompleksitas waktu O(n)</li>
                        <li>Mudah dipahami dan diimplementasikan</li>
                        <li>Hasil yang baik untuk permintaan yang relatif stabil</li>
                    </ul>
                    <p class="text-gray-600">
                        Kekurangan:
                    </p>
                    <ul class="list-disc pl-5 text-gray-600">
                        <li>Tidak selalu menghasilkan solusi yang optimal</li>
                        <li>Sensitif terhadap variasi permintaan yang ekstrim</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <script type="text/javascript" src="main.js"></script>
    <script>
       function animateClick(element) {
    element.classList.add("scale-90"); // mengecilkan sedikit
    setTimeout(() => {
      element.classList.remove("scale-90");
    }, 150); // durasi animasi
  } 
     // Initialize dynamic demand inputs
        document.addEventListener('DOMContentLoaded', function() {
            const periodsInput = document.getElementById('periods');
            const demandInputs = document.getElementById('demandInputs');
            
            // Update demand inputs when period count changes
            periodsInput.addEventListener('input', updateDemandInputs);
            
            // Initialize inputs
            updateDemandInputs();
            
            // Tab switching functionality
            document.getElementById('wagnerTab').addEventListener('click', function() {
                document.getElementById('wagnerResults').classList.remove('hidden');
                document.getElementById('silverResults').classList.add('hidden');
                document.getElementById('compareResults').classList.add('hidden');
                document.getElementById('wagnerTab').classList.add('active-tab');
                document.getElementById('silverTab').classList.remove('active-tab');
                document.getElementById('compareTab').classList.remove('active-tab');
            });
            
            document.getElementById('silverTab').addEventListener('click', function() {
                document.getElementById('wagnerResults').classList.add('hidden');
                document.getElementById('silverResults').classList.remove('hidden');
                document.getElementById('compareResults').classList.add('hidden');
                document.getElementById('wagnerTab').classList.remove('active-tab');
                document.getElementById('silverTab').classList.add('active-tab');
                document.getElementById('compareTab').classList.remove('active-tab');
            });
            
            document.getElementById('compareTab').addEventListener('click', function() {
                document.getElementById('wagnerResults').classList.add('hidden');
                document.getElementById('silverResults').classList.add('hidden');
                document.getElementById('compareResults').classList.remove('hidden');
                document.getElementById('wagnerTab').classList.remove('active-tab');
                document.getElementById('silverTab').classList.remove('active-tab');
                document.getElementById('compareTab').classList.add('active-tab');
            });
            
            // Calculate button functionality
            document.getElementById('calculateBtn').addEventListener('click', calculateInventory);
        });
        
        function updateDemandInputs() {
            const periods = parseInt(document.getElementById('periods').value);
            const demandInputs = document.getElementById('demandInputs');
            
            // Clear existing inputs
            demandInputs.innerHTML = '';
            
            // Add new inputs
            for (let i = 1; i <= periods; i++) {
                const div = document.createElement('div');
                div.className = 'flex items-center';
                
                const label = document.createElement('label');
                label.className = 'w-24 text-gray-700';
                label.textContent = `Periode ${i}:`;
                
                const input = document.createElement('input');
                input.type = 'number';
                input.min = '0';
                input.value = Math.floor(Math.random() * 100) + 20; // Random demand between 20-120
                input.className = 'w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500';
                input.id = `demand${i}`;
                
                div.appendChild(label);
                div.appendChild(input);
                demandInputs.appendChild(div);
            }
        }
        
        function calculateInventory() {
            const periods = parseInt(document.getElementById('periods').value);
            const setupCost = parseFloat(document.getElementById('setupCost').value);
            const holdingCost = parseFloat(document.getElementById('holdingCost').value);
            
            // Get demand for each period
            const demands = [];
            for (let i = 1; i <= periods; i++) {
                demands.push(parseFloat(document.getElementById(`demand${i}`).value));
            }
            
            // Calculate Wagner-Within solution
            const wagnerResults = wagnerWithin(demands, setupCost, holdingCost);
            displayWagnerResults(wagnerResults, demands);
            
            // Calculate Silver-Meal solution
            const silverResults = silverMeal(demands, setupCost, holdingCost);
            displaySilverResults(silverResults, demands);
            
            // Compare results
            compareResults(wagnerResults, silverResults);
        }
        
        function wagnerWithin(demands, setupCost, holdingCost) {
            const n = demands.length;
            const totalCost = Array(n).fill(Infinity);
            const orderQuantities = Array(n).fill(0);
            const lastOrderPeriod = Array(n).fill(0);
            
            // Initialize first period
            totalCost[0] = setupCost; // Only setup cost for first period
            orderQuantities[0] = demands[0];
            lastOrderPeriod[0] = 0;
            
            // Dynamic programming solution
            for (let j = 1; j < n; j++) {
                for (let i = 0; i <= j; i++) {
                    let holding = 0;
                    for (let k = i; k < j; k++) {
                        holding += demands[k+1] * (k+1 - i) * holdingCost;
                    }
                    
                    const prevCost = (i === 0) ? 0 : totalCost[i-1];
                    const currentCost = prevCost + setupCost + holding;
                    
                    if (currentCost < totalCost[j]) {
                        totalCost[j] = currentCost;
                        orderQuantities[j] = demands.slice(i, j+1).reduce((a, b) => a + b, 0);
                        lastOrderPeriod[j] = i;
                    }
                }
            }
            
            // Determine order periods and quantities
            const orderSchedule = Array(n).fill(0);
            let j = n - 1;
            while (j >= 0) {
                const i = lastOrderPeriod[j];
                orderSchedule[i] = orderQuantities[j];
                j = i - 1;
            }
            
            return {
                totalCost: totalCost[n-1],
                orderSchedule: orderSchedule,
                holdingCosts: calculateHoldingCosts(orderSchedule, demands, holdingCost)
            };
        }
        
        function silverMeal(demands, setupCost, holdingCost) {
            const n = demands.length;
            const orderSchedule = Array(n).fill(0);
            
            let currentPeriod = 0;
            let totalCost = 0;
            const holdingCosts = Array(n).fill(0);
            
            while (currentPeriod < n) {
                let k = 1;
                let bestK = 1;
                let minAverageCost = Infinity;
                
                while (currentPeriod + k - 1 < n) {
                    let holding = 0;
                    for (let i = 1; i < k; i++) {
                        holding += demands[currentPeriod + i] * i * holdingCost;
                    }
                    
                    const averageCost = (setupCost + holding) / k;
                    
                    if (averageCost < minAverageCost) {
                        minAverageCost = averageCost;
                        bestK = k;
                    } else {
                        break; // Stop when average cost starts increasing
                    }
                    
                    k++;
                }
                
                // Calculate actual holding cost for this order
                let actualHolding = 0;
                for (let i = 1; i < bestK; i++) {
                    holdingCosts[currentPeriod + i] = demands[currentPeriod + i] * i * holdingCost;
                    actualHolding += holdingCosts[currentPeriod + i];
                }
                
                // Record this order
                const orderQuantity = demands.slice(currentPeriod, currentPeriod + bestK).reduce((a, b) => a + b, 0);
                orderSchedule[currentPeriod] = orderQuantity;
                totalCost += setupCost + actualHolding;
                
                currentPeriod += bestK;
            }
            
            return {
                totalCost: totalCost,
                orderSchedule: orderSchedule,
                holdingCosts: holdingCosts
            };
        }
        
        function calculateHoldingCosts(orderSchedule, demands, holdingCost) {
            const n = demands.length;
            const holdingCosts = Array(n).fill(0);
            let inventory = 0;
            
            for (let i = 0; i < n; i++) {
                if (orderSchedule[i] > 0) {
                    inventory = orderSchedule[i];
                }
                
                if (i > 0) {
                    holdingCosts[i] = inventory * holdingCost;
                    inventory -= demands[i];
                }
            }
            
            return holdingCosts;
        }
        
        function displayWagnerResults(results, demands) {
            const periods = demands.length;
            const rop = Array(demands.length + 1).fill(''); // +1 untuk periode 0
                for (let i = 1; i <= demands.length; i++) {
                    if (results.orderSchedule[i - 1] > 0) {
                        rop[i - 1] = results.orderSchedule[i - 1];
                    }
                }
            // Display table
            const table = document.getElementById('wagnerTable');
            table.innerHTML = `
            <tr class="border-b bg-blue-100">
                <td class="px-4 py-2">0</td>
                <td class="px-4 py-2">-</td>
                <td class="px-4 py-2">${rop[0]}</td>
                <td class="px-4 py-2">-</td>
                <td class="px-4 py-2">-</td>
                <td class="px-4 py-2">-</td>
            </tr>
                <thead>
                    <tr class="bg-blue-50 text-blue-800">
                        <th class="px-4 py-2 text-left">Periode</th>
                        <th class="px-4 py-2 text-left">Permintaan</th>
                        <th class="px-4 py-2 text-left">POR</th>
                        <th class="px-4 py-2 text-left">Pesanan</th>
                        <th class="px-4 py-2 text-left">Persediaan</th>
                        <th class="px-4 py-2 text-left">Biaya Inventori</th>
                    </tr>
                </thead>
                <tbody>
                   row +=${demands.map((demand, i) => `
                        <tr class="border-b border-gray-100 hover:bg-blue-50">
                            <td class="px-4 py-2">${i+1}</td>
                            <td class="px-4 py-2">${demand}</td>
                            <td class="px-4 py-2">${rop[i + 1]}</td>
                            <td class="px-4 py-2">${results.orderSchedule[i] > 0 ? results.orderSchedule[i] : ''}</td>
                            <td class="px-4 py-2">${i === 0 ? results.orderSchedule[i] - demand : (results.orderSchedule[i] > 0 ? results.orderSchedule[i] - demand : '')}</td>
                            <td class="px-4 py-2">${results.holdingCosts[i] > 0 ? results.holdingCosts[i].toFixed(2) : ''}</td>
                        </tr>
                    `).join('')}
                    <tr class="bg-blue-100 font-semibold">
                        <td colspan="4" class="px-4 py-2 text-right">Total Biaya:</td>
                        <td class="px-4 py-2">${results.totalCost.toFixed(2)}</td>
                    </tr>
                </tbody>
            `;
            
            // Display summary
            document.getElementById('wagnerSummary').innerHTML = `
                Total biaya persediaan dengan metode Wagner-Within adalah <span class="font-semibold">${results.totalCost.toFixed(2)}</span>.<br>
                Jumlah pemesanan: <span class="font-semibold">${results.orderSchedule.filter(x => x > 0).length}</span> kali.<br>
                Skema pemesanan: ${results.orderSchedule.map((qty, i) => qty > 0 ? `Pesan ${qty} unit pada periode ${i+1}` : '').filter(x => x).join(', ')}.
            `;
            
            // Update chart
            updateChart('wagnerChart', 'Grafik Pemesanan Wagner-Within', demands, results.orderSchedule, results.holdingCosts, 'blue');
        }
        
        function displaySilverResults(results, demands) {
            const periods = demands.length;
             const rop = Array(demands.length + 1).fill(''); // +1 untuk periode 0
                for (let i = 1; i <= demands.length; i++) {
                    if (results.orderSchedule[i - 1] > 0) {
                        rop[i - 1] = results.orderSchedule[i - 1];
                    }
                }
            // Display table
            const table = document.getElementById('silverTable');
            table.innerHTML = `
            <tr class="border-b bg-blue-100">
                <td class="px-4 py-2">0</td>
                <td class="px-4 py-2">-</td>
                <td class="px-4 py-2">${rop[0]}</td>
                <td class="px-4 py-2">-</td>
                <td class="px-4 py-2">-</td>
                <td class="px-4 py-2">-</td>
            </tr>
                <thead>
                    <tr class="bg-green-50 text-green-800">
                        <th class="px-4 py-2 text-left">Periode</th>
                        <th class="px-4 py-2 text-left">Permintaan</th>
                        <th class="px-4 py-2 text-left">POR</th>
                        <th class="px-4 py-2 text-left">Pesanan</th>
                        <th class="px-4 py-2 text-left">Persediaan</th>
                        <th class="px-4 py-2 text-left">Biaya Inventori</th>
                    </tr>
                </thead>
                <tbody>
                    ${demands.map((demand, i) => `
                        <tr class="border-b border-gray-100 hover:bg-green-50">
                            <td class="px-4 py-2">${i+1}</td>
                            <td class="px-4 py-2">${demand}</td>
                            <td class="px-4 py-2">${rop[i + 1]}</td>
                            <td class="px-4 py-2">${results.orderSchedule[i] > 0 ? results.orderSchedule[i] : ''}</td>
                            <td class="px-4 py-2">${i === 0 ? results.orderSchedule[i] - demand : (results.orderSchedule[i] > 0 ? results.orderSchedule[i] - demand : '')}</td>
                            <td class="px-4 py-2">${results.holdingCosts[i] > 0 ? results.holdingCosts[i].toFixed(2) : ''}</td>
                        </tr>
                    `).join('')}
                    <tr class="bg-green-100 font-semibold">
                        <td colspan="4" class="px-4 py-2 text-right">Total Biaya:</td>
                        <td class="px-4 py-2">${results.totalCost.toFixed(2)}</td>
                    </tr>
                </tbody>
            `;
            
            // Display summary
            document.getElementById('silverSummary').innerHTML = `
                Total biaya persediaan dengan metode Silver-Meal adalah <span class="font-semibold">${results.totalCost.toFixed(2)}</span>.<br>
                Jumlah pemesanan: <span class="font-semibold">${results.orderSchedule.filter(x => x > 0).length}</span> kali.<br>
                Skema pemesanan: ${results.orderSchedule.map((qty, i) => qty > 0 ? `Pesan ${qty} unit pada periode ${i+1}` : '').filter(x => x).join(', ')}.
            `;
            
            // Update chart
            updateChart('silverChart', 'Grafik Pemesanan Silver-Meal', demands, results.orderSchedule, results.holdingCosts, 'green');
        }
        
        function compareResults(wagnerResults, silverResults) {
            document.getElementById('wagnerCompare').innerHTML = `
                Total Biaya: <span class="font-semibold">${wagnerResults.totalCost.toFixed(2)}</span><br>
                Jumlah Pemesanan: <span class="font-semibold">${wagnerResults.orderSchedule.filter(x => x > 0).length}</span><br>
                Rata-rata Ukuran Pesanan: <span class="font-semibold">${(wagnerResults.orderSchedule.reduce((a, b) => a + b, 0) / wagnerResults.orderSchedule.filter(x => x > 0).length).toFixed(2)}</span>
            `;
            
            document.getElementById('silverCompare').innerHTML = `
                Total Biaya: <span class="font-semibold">${silverResults.totalCost.toFixed(2)}</span><br>
                Jumlah Pemesanan: <span class="font-semibold">${silverResults.orderSchedule.filter(x => x > 0).length}</span><br>
                Rata-rata Ukuran Pesanan: <span class="font-semibold">${(silverResults.orderSchedule.reduce((a, b) => a + b, 0) / silverResults.orderSchedule.filter(x => x > 0).length).toFixed(2)}</span>
            `;
            
            let conclusion = '';
            if (wagnerResults.totalCost < silverResults.totalCost) {
                conclusion = 'Metode Wagner-Within memberikan biaya total yang lebih rendah dan direkomendasikan untuk scenario ini.';
            } else if (wagnerResults.totalCost > silverResults.totalCost) {
                conclusion = 'Metode Silver-Meal memberikan biaya total yang lebih rendah dan direkomendasikan untuk scenario ini.';
            } else {
                conclusion = 'Kedua metode memberikan biaya total yang sama. Silver-Meal mungkin lebih disukai karena lebih sederhana.';
            }
            
            document.getElementById('conclusion').textContent = conclusion;
            
            // Update comparison charts
            updateComparisonCharts(wagnerResults, silverResults);
        }
        
        function updateChart(canvasId, title, demands, orders, holdingCosts, color) {
            const ctx = document.getElementById(canvasId).getContext('2d');
            
            // Destroy existing chart if it exists
            if (window[`${canvasId}Chart`]) {
                window[`${canvasId}Chart`].destroy();
            }
            
            const labels = demands.map((_, i) => `Periode ${i+1}`);
            
            window[`${canvasId}Chart`] = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [
                        {
                            label: 'Permintaan',
                            data: demands,
                            backgroundColor: `rgba(75, 192, 192, 0.6)`,
                            borderColor: `rgba(75, 192, 192, 1)`,
                            borderWidth: 1
                        },
                        {
                            label: 'Pesanan',
                            data: orders,
                            backgroundColor: `rgba(54, 162, 235, 0.6)`,
                            borderColor: `rgba(54, 162, 235, 1)`,
                            borderWidth: 1,
                            type: 'line',
                            tension: 0.1
                        },
                        {
                            label: 'Biaya Inventori',
                            data: holdingCosts,
                            backgroundColor: `rgba(255, 206, 86, 0.6)`,
                            borderColor: `rgba(255, 206, 86, 1)`,
                            borderWidth: 1,
                            yAxisID: 'y1'
                        }
                    ]
                },
                options: {
                    responsive: true,
                    plugins: {
                        title: {
                            display: true,
                            text: title
                        },
                        legend: {
                            position: 'top',
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Unit/Quantity'
                            }
                        },
                        y1: {
                            beginAtZero: true,
                            position: 'right',
                            title: {
                                display: true,
                                text: 'Biaya'
                            },
                            grid: {
                                drawOnChartArea: false
                            }
                        }
                    }
                }
            });
        }
        
        function updateComparisonCharts(wagnerResults, silverResults) {
            // Cost comparison chart
            const costCtx = document.getElementById('costChart').getContext('2d');
            
            if (window.costComparisonChart) {
                window.costComparisonChart.destroy();
            }
            
            window.costComparisonChart = new Chart(costCtx, {
                type: 'bar',
                data: {
                    labels: ['Wagner-Within', 'Silver-Meal'],
                    datasets: [{
                        label: 'Total Biaya',
                        data: [wagnerResults.totalCost, silverResults.totalCost],
                        backgroundColor: [
                            'rgba(54, 162, 235, 0.7)',
                            'rgba(75, 192, 192, 0.7)'
                        ],
                        borderColor: [
                            'rgba(54, 162, 235, 1)',
                            'rgba(75, 192, 192, 1)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
            
            // Order frequency comparison chart
            const orderCtx = document.getElementById('orderChart').getContext('2d');
            
            if (window.orderComparisonChart) {
                window.orderComparisonChart.destroy();
            }
            
            const wagnerOrders = wagnerResults.orderSchedule.filter(x => x > 0).length;
            const silverOrders = silverResults.orderSchedule.filter(x => x > 0).length;
            
            window.orderComparisonChart = new Chart(orderCtx, {
                type: 'bar',
                data: {
                    labels: ['Wagner-Within', 'Silver-Meal'],
                    datasets: [{
                        label: 'Jumlah Pemesanan',
                        data: [wagnerOrders, silverOrders],
                        backgroundColor: [
                            'rgba(255, 206, 86, 0.7)',
                            'rgba(153, 102, 255, 0.7)'
                        ],
                        borderColor: [
                            'rgba(255, 206, 86, 1)',
                            'rgba(153, 102, 255, 1)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            stepSize: 1
                        }
                    }
                }
            });
        }
    </script>
</body>
</html>

